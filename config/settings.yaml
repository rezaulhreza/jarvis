# Jarvis Configuration
# Secrets should be in .env file, not here!

# User Profile (customize in ~/.jarvis/config/settings.yaml)
user:
  name: ""                  # Your full name
  nickname: ""              # How Jarvis should address you (optional)
  address_user: false       # Whether Jarvis should address you by name

# Model Settings
models:
  default: "qwen3:4b"
  reasoning: "deepseek-r1:8b"
  vision: "llava"
  code: "qwen2.5-coder:7b"
  tools: "functiongemma"
  embeddings: "nomic-embed-text"

# Context Management
context:
  max_tokens: 8000
  keep_recent_messages: 5
  auto_compact: true
  summary_model: "qwen3:4b"

# Agent Behavior
agent:
  # Tool handling: "auto" (default), "native", "prompt", "off"
  tool_mode: "auto"
  # Auto-run tools for time/weather/current info when detected
  auto_tools: true
  auto_current_info: true
  auto_weather: true
  auto_time: true
  auto_calculate: true
  # Skip tool-capable loop when tools are unlikely
  fast_no_tools: true
  # Timeouts (seconds)
  timeouts:
    default: 120
    reasoning: 300

# Memory Settings
memory:
  database: "memory/jarvis.db"
  vector_store: "knowledge/chroma_db"  # ChromaDB local path (fallback when Qdrant not configured)
  # Vector backend is auto-detected from env: QDRANT_URL + QDRANT_API_KEY → Qdrant, otherwise → ChromaDB
  rerank: true  # Enable cross-encoder reranking for better retrieval accuracy
  rerank_model: "cross-encoder/ms-marco-MiniLM-L-6-v2"  # Reranker model (requires sentence-transformers)
  # rerank_threshold: -5.0  # Min rerank score (disabled by default - calibrate on your data first)
  relevance_threshold: 0.5  # Max cosine distance when reranker disabled (0-1, lower = stricter)
  embedding_dim: 768  # Expected embedding dimension (nomic-embed-text = 768)
  facts_file: "memory/facts.md"
  entities_file: "memory/entities.json"

# Active Persona (see config/personas/)
persona: "default"

# Integrations
integrations:
  telegram:
    enabled: false
    # Token loaded from TELEGRAM_BOT_TOKEN env var

  web_search:
    enabled: true
    provider: "duckduckgo"

  weather:
    enabled: false
    # API key loaded from OPENWEATHER_API_KEY env var
    units: "metric"

  calendar:
    enabled: false
    provider: "google"

  github:
    enabled: false
    # Token loaded from GITHUB_TOKEN env var

  notion:
    enabled: false
    # API key loaded from NOTION_API_KEY env var

# Provider Credentials (optional; env vars still supported)
providers:
  openai:
    api_key: null
    access_token: null
    base_url: null
  anthropic:
    api_key: null
    access_token: null
    base_url: null
  ollama_cloud:
    base_url: null
    api_key: null

# Safety Settings
safety:
  confirm_destructive: true
  log_all_commands: true
  max_shell_timeout: 30
  allowed_directories:
    - "~"
    - "/tmp"
  blocked_commands:
    - "rm -rf"
    - "sudo"
    - "mkfs"

# Voice Settings (future)
voice:
  enabled: false
  stt_model: "whisper"
  tts_engine: "say"
  wake_word: "jarvis"

# Logging
logging:
  level: "INFO"
  file: "logs/jarvis.log"
  max_size_mb: 10
  backup_count: 3
